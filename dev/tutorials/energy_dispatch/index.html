<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Energy Dispatch (ADMM) · DistributedResourceOptimization.jl Documentation</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/theme_overrides.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="DistributedResourceOptimization.jl Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DistributedResourceOptimization.jl Documentation</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../getting_started/">Getting Started</a></li><li><span class="tocitem">Algorithms</span><ul><li><a class="tocitem" href="../../algorithms/admm/">ADMM</a></li><li><a class="tocitem" href="../../algorithms/cohda/">COHDA</a></li><li><a class="tocitem" href="../../algorithms/consensus/">Averaging Consensus</a></li></ul></li><li><span class="tocitem">Carriers</span><ul><li><a class="tocitem" href="../../carrier/simple/">SimpleCarrier</a></li><li><a class="tocitem" href="../../carrier/mango/">MangoCarrier</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>Energy Dispatch (ADMM)</a><ul class="internal"><li><a class="tocitem" href="#Problem-Statement"><span>Problem Statement</span></a></li><li><a class="tocitem" href="#Step-1-—-Define-the-Resources"><span>Step 1 — Define the Resources</span></a></li><li><a class="tocitem" href="#Step-2-—-Create-the-Coordinator"><span>Step 2 — Create the Coordinator</span></a></li><li><a class="tocitem" href="#Step-3-—-Set-Up-the-Problem-Data"><span>Step 3 — Set Up the Problem Data</span></a></li><li><a class="tocitem" href="#Step-4-—-Run-the-Optimization"><span>Step 4 — Run the Optimization</span></a></li><li><a class="tocitem" href="#Step-5-—-Read-the-Results"><span>Step 5 — Read the Results</span></a></li><li><a class="tocitem" href="#Complete-Script"><span>Complete Script</span></a></li><li><a class="tocitem" href="#Tuning-Convergence"><span>Tuning Convergence</span></a></li><li><a class="tocitem" href="#Next-Steps"><span>Next Steps</span></a></li></ul></li><li><a class="tocitem" href="../schedule_coordination/">Schedule Coordination (COHDA)</a></li></ul></li><li><span class="tocitem">How-To Guides</span><ul><li><a class="tocitem" href="../../howtos/custom_algorithm/">Custom Algorithm</a></li><li><a class="tocitem" href="../../howtos/custom_carrier/">Custom Carrier</a></li></ul></li><li><a class="tocitem" href="../../api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Energy Dispatch (ADMM)</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Energy Dispatch (ADMM)</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Digitalized-Energy-Systems/DistributedResourceOptimization.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial:-Energy-Dispatch-with-ADMM"><a class="docs-heading-anchor" href="#Tutorial:-Energy-Dispatch-with-ADMM">Tutorial: Energy Dispatch with ADMM</a><a id="Tutorial:-Energy-Dispatch-with-ADMM-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial:-Energy-Dispatch-with-ADMM" title="Permalink"></a></h1><p>This tutorial walks through using ADMM to coordinate flexible energy resources — heat pumps, batteries, and PV inverters — so that their combined power output matches a target profile.</p><h2 id="Problem-Statement"><a class="docs-heading-anchor" href="#Problem-Statement">Problem Statement</a><a id="Problem-Statement-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-Statement" title="Permalink"></a></h2><p>Suppose an aggregator controls three flexible resources. Each resource converts an input power into outputs across three sectors (e.g., thermal, electrical, reactive power). The aggregator wants the combined output to be as close as possible to:</p><pre><code class="nohighlight hljs">target = [-4.0, 0.0, 6.0]  kW</code></pre><p>with the first sector weighted five times more heavily than the others (e.g., it is a critical load).</p><h2 id="Step-1-—-Define-the-Resources"><a class="docs-heading-anchor" href="#Step-1-—-Define-the-Resources">Step 1 — Define the Resources</a><a id="Step-1-—-Define-the-Resources-1"></a><a class="docs-heading-anchor-permalink" href="#Step-1-—-Define-the-Resources" title="Permalink"></a></h2><p>Each resource is modelled as an ADMM flex actor. The constructor <a href="../../api/#DistributedResourceOptimization.create_admm_flex_actor_one_to_many"><code>create_admm_flex_actor_one_to_many</code></a> takes:</p><ul><li><code>in_capacity</code> — maximum input power in kW</li><li><code>η</code> — efficiency vector mapping input to outputs (negative means the resource <em>consumes</em> that output type)</li><li><code>P</code> (optional) — priority penalty vector that biases the local solution</li></ul><pre><code class="language-julia hljs">using DistributedResourceOptimization

# Resource 1: 10 kW heat pump — produces thermal (η₁=0.1) and electrical (η₂=0.5),
#             consumes reactive power (η₃=−1.0)
resource1 = create_admm_flex_actor_one_to_many(10.0, [0.1, 0.5, -1.0])

# Resource 2: 15 kW battery — same conversion ratios, higher capacity
resource2 = create_admm_flex_actor_one_to_many(15.0, [0.1, 0.5, -1.0])

# Resource 3: 10 kW PV inverter — consumes thermal, neutral electrical, produces reactive
resource3 = create_admm_flex_actor_one_to_many(10.0, [-1.0, 0.0, 1.0])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ADMMFlexActor([-10.0, 0.0, 0.0], [0.0, 0.0, 10.0], [-1.0 1.0 1.0; -0.1 0.0 -0.1; … ; 0.0 0.0 0.0; 0.0 0.0 0.0], [20.0, 0.0, 0.0, 0.0, 0.0], [-0.0, -0.0, -0.0], Float64[])</code></pre><h2 id="Step-2-—-Create-the-Coordinator"><a class="docs-heading-anchor" href="#Step-2-—-Create-the-Coordinator">Step 2 — Create the Coordinator</a><a id="Step-2-—-Create-the-Coordinator-1"></a><a class="docs-heading-anchor-permalink" href="#Step-2-—-Create-the-Coordinator" title="Permalink"></a></h2><p>The coordinator solves the global z-update each ADMM iteration. We use the sharing variant, which minimises the weighted distance of the aggregate output to the target:</p><pre><code class="language-julia hljs">coordinator = create_sharing_target_distance_admm_coordinator()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ADMMGenericCoordinator(ADMMSharingGlobalActor(ADMMTargetDistanceObjective()), 1.0, 1000, 0.0001, 0.001)</code></pre><h2 id="Step-3-—-Set-Up-the-Problem-Data"><a class="docs-heading-anchor" href="#Step-3-—-Set-Up-the-Problem-Data">Step 3 — Set Up the Problem Data</a><a id="Step-3-—-Set-Up-the-Problem-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Step-3-—-Set-Up-the-Problem-Data" title="Permalink"></a></h2><p><a href="tutorials/@ref"><code>create_admm_sharing_data</code></a> bundles the target vector and priority weights:</p><pre><code class="language-julia hljs"># target = [-4, 0, 6], priorities = [5, 1, 1]
problem_data = create_admm_sharing_data([-4.0, 0.0, 6.0], [5, 1, 1])
start_msg    = create_admm_start(problem_data)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ADMMStart(DistributedResourceOptimization.ADMMSharingData([-4.0, 0.0, 6.0], [-5, -1, -1]), 3)</code></pre><p>The priority weight <code>5</code> for the first sector means deviations there are penalised five times more than deviations in the other two sectors.</p><h2 id="Step-4-—-Run-the-Optimization"><a class="docs-heading-anchor" href="#Step-4-—-Run-the-Optimization">Step 4 — Run the Optimization</a><a id="Step-4-—-Run-the-Optimization-1"></a><a class="docs-heading-anchor-permalink" href="#Step-4-—-Run-the-Optimization" title="Permalink"></a></h2><pre><code class="language-julia hljs">start_coordinated_optimization(
    [resource1, resource2, resource3],
    coordinator,
    start_msg,
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3-element Vector{Vector{Float64}}:
 [-3.4277043170920415e-5, -6.029602882136576e-5, 9.807721658436507e-5]
 [-3.4395492006879775e-5, -6.047730916210925e-5, 9.835248595241848e-5]
 [-3.9827244976277694, -7.203738658268822e-7, 3.9827244996656925]</code></pre><p>This call blocks until the ADMM algorithm converges (or hits <code>max_iters</code>).</p><h2 id="Step-5-—-Read-the-Results"><a class="docs-heading-anchor" href="#Step-5-—-Read-the-Results">Step 5 — Read the Results</a><a id="Step-5-—-Read-the-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Step-5-—-Read-the-Results" title="Permalink"></a></h2><p>After convergence, retrieve each resource&#39;s optimal output vector with <a href="../../api/#DistributedResourceOptimization.result-Tuple{COHDAAlgorithmData}"><code>result</code></a>:</p><pre><code class="language-julia hljs">x1 = result(resource1)
x2 = result(resource2)
x3 = result(resource3)

println(&quot;Resource 1 output: &quot;, round.(x1; digits=3))
println(&quot;Resource 2 output: &quot;, round.(x2; digits=3))
println(&quot;Resource 3 output: &quot;, round.(x3; digits=3))
println(&quot;Aggregate:         &quot;, round.(x1 .+ x2 .+ x3; digits=3))
println(&quot;Target:            &quot;, [-4.0, 0.0, 6.0])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Resource 1 output: [-0.0, -0.0, 0.0]
Resource 2 output: [-0.0, -0.0, 0.0]
Resource 3 output: [-3.983, -0.0, 3.983]
Aggregate:         [-3.983, -0.0, 3.983]
Target:            [-4.0, 0.0, 6.0]</code></pre><h2 id="Complete-Script"><a class="docs-heading-anchor" href="#Complete-Script">Complete Script</a><a id="Complete-Script-1"></a><a class="docs-heading-anchor-permalink" href="#Complete-Script" title="Permalink"></a></h2><pre><code class="language-julia hljs">using DistributedResourceOptimization

# Resources
resource1 = create_admm_flex_actor_one_to_many(10.0, [0.1,  0.5, -1.0])
resource2 = create_admm_flex_actor_one_to_many(15.0, [0.1,  0.5, -1.0])
resource3 = create_admm_flex_actor_one_to_many(10.0, [-1.0, 0.0,  1.0])

# Coordinator and problem
coordinator  = create_sharing_target_distance_admm_coordinator()
problem_data = create_admm_sharing_data([-4.0, 0.0, 6.0], [5, 1, 1])
start_msg    = create_admm_start(problem_data)

# Solve
start_coordinated_optimization([resource1, resource2, resource3], coordinator, start_msg)

# Results
x1, x2, x3 = result(resource1), result(resource2), result(resource3)
println(&quot;Resource 1: &quot;, round.(x1; digits=3))
println(&quot;Resource 2: &quot;, round.(x2; digits=3))
println(&quot;Resource 3: &quot;, round.(x3; digits=3))
println(&quot;Aggregate:  &quot;, round.(x1 .+ x2 .+ x3; digits=3))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Resource 1: [-0.0, -0.0, 0.0]
Resource 2: [-0.0, -0.0, 0.0]
Resource 3: [-3.983, -0.0, 3.983]
Aggregate:  [-3.983, -0.0, 3.983]</code></pre><h2 id="Tuning-Convergence"><a class="docs-heading-anchor" href="#Tuning-Convergence">Tuning Convergence</a><a id="Tuning-Convergence-1"></a><a class="docs-heading-anchor-permalink" href="#Tuning-Convergence" title="Permalink"></a></h2><p>If the result is not accurate enough, or convergence is slow, build an <a href="tutorials/@ref"><code>ADMMGenericCoordinator</code></a> directly to override any parameter:</p><pre><code class="language-julia hljs">using DistributedResourceOptimization

resource1 = create_admm_flex_actor_one_to_many(10.0, [0.1,  0.5, -1.0])
resource2 = create_admm_flex_actor_one_to_many(15.0, [0.1,  0.5, -1.0])
resource3 = create_admm_flex_actor_one_to_many(10.0, [-1.0, 0.0,  1.0])

coordinator = ADMMGenericCoordinator(
    global_actor = ADMMSharingGlobalActor(ADMMTargetDistanceObjective()),
    ρ            = 5.0,    # larger ρ enforces constraints more aggressively
    max_iters    = 500,    # allow more iterations
    abs_tol      = 1e-5,   # tighter tolerance
    rel_tol      = 1e-4,
)

start_msg = create_admm_start(create_admm_sharing_data([-4.0, 0.0, 6.0], [5, 1, 1]))
start_coordinated_optimization([resource1, resource2, resource3], coordinator, start_msg)

x1, x2, x3 = result(resource1), result(resource2), result(resource3)
println(&quot;Aggregate:  &quot;, round.(x1 .+ x2 .+ x3; digits=3))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Aggregate:  [-4.0, -0.0, 4.0]</code></pre><div class="admonition is-success"><header class="admonition-header">Priority Weights</header><div class="admonition-body"><p>Setting large priority weights for a sector (e.g., <code>[100, 1, 1]</code>) forces the optimizer to match that sector&#39;s target as closely as possible, potentially at the expense of other sectors. Use this to encode hard priorities in soft constraints.</p></div></div><h2 id="Next-Steps"><a class="docs-heading-anchor" href="#Next-Steps">Next Steps</a><a id="Next-Steps-1"></a><a class="docs-heading-anchor-permalink" href="#Next-Steps" title="Permalink"></a></h2><ul><li>Try adding a fourth resource and observe how the aggregate adapts</li><li>Experiment with different efficiency vectors <code>η</code> to model other resource types</li><li>See <a href="../../algorithms/admm/">ADMM algorithm details</a> for the mathematical background</li><li>See <a href="../../howtos/custom_algorithm/">How To: Implement a Custom Algorithm</a> to write your own local model</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../carrier/mango/">« MangoCarrier</a><a class="docs-footer-nextpage" href="../schedule_coordination/">Schedule Coordination (COHDA) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Thursday 19 February 2026 21:44">Thursday 19 February 2026</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
